<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>

    <!-- fontawesome -->
    <script src="https://kit.fontawesome.com/490ac8585b.js" crossorigin="anonymous"></script>


    <script>
        var stepToCSS = 'px'
        var stepToCalc = 100
        var leftPos = 0
        var topPos = 0
        var timeDelay = 200
        
        var a
        var w
        var d
        var s

        document.onkeypress = function(asd){
        //    inserir função para determinar movimentos
            moveSnake(asd.key)
        }
        function canMove(firstTarget, secondTarget, operation){

            if ( operation == '+'){
                firstTarget += stepToCalc
            }
            else{
                firstTarget -= stepToCalc

            }

            if (leaveMap()){
                clearAllInterval()
            }
            else{
                if(secondTarget == snakePos.left){
                    snakePos.left = firstTarget + stepToCSS
                }
                else{
                    snakePos.top = firstTarget + stepToCSS
                }
            }
            
        }
        function moveSnake(directionLocal){
        
            switch (directionLocal){

                case 'a':{
                    direction = 'a'
                    clearAllInterval()
                    
                    a = setInterval(
                        function(){canMove(leftPos, snakePos.left, '-')},
                        timeDelay
                    )
                    break
                }
                case 'w':{
                    direction = 'w'
                    clearAllInterval()
                    w = setInterval(
                        function(){
                            topPos -= stepToCalc
                            snakePos.top  = topPos + stepToCSS},
                        timeDelay
                    )
                    break
                }
                case 's':{
                    direction = 's'
                    clearAllInterval()
                    s = setInterval(
                        function(){
                            topPos += stepToCalc
                            snakePos.top = topPos + stepToCSS},
                        timeDelay
                    )
                    break
                }
                case 'd':{
                    direction = 'd'
                    clearAllInterval()
                    d = setInterval(
                        function(){
                            leftPos += stepToCalc
                            snakePos.left = leftPos + stepToCSS
                            leaveMap()},
                        timeDelay
                    )
                    break
                }
            }

        }
        function clearAllInterval(){
            clearInterval(a)
            clearInterval(w)
            clearInterval(s)
            clearInterval(d)
        }
        function leaveMap(){
            if (leftPos < 0 || leftPos > 1400 || topPos < 0 || topPos > 600){
                console.log('LEAVE MAP')
                return true
            }    
        }
    </script>

    <style>
        .nav{
            width: 1400px;
            height: 150px;
            background-color: black;
        }
        .map{
            width: 1400px;
            height: 600px;
            background-color: gray;
            position: relative;
        }
        #snake{
            width: 100px;
            height: 100px;
            background-color: green;
            position: absolute;
            transition-duration: .3s;
        }
    </style>
</head>
<body>

    
    <main class="d-flex justify-content-center flex-wrap">
        <div class="nav">

        </div>
        <div class="map">
            <div id="snake"></div>
        </div>
    </main>

    <script>
        var pressed = document.getElementById('pressed')
        var snakePos = document.getElementById('snake').style
    </script>
</body>
</html>